# 存储器
我们说过现代计算机以**存储器**为中心，这一章我们就要具体研究存储器的种类以及相关的工作原理。
![总结](/image/1/review1.png)
这一节我们通过逐步完善一个思维导图的方式来进行记忆。
要研究存储器我们首先就需要知道他们的种类。
## 存储器的分类
### 按层次分类
![huawei](/image/3/huawei.png)
我们需要对存储器的类型有一个基本的认知，在这张手机的购买页面中，我们总会发现有类似（**12GB+512GB**）的字样，我们总会听人说12是运行内存，512是“内存”；小时候打游戏可能会碰到运行内存不足的说法，可打开Windows的磁盘管理器，**明明还有好几个G！**这样的说法在计算机组成原理中不常用，也不够严谨。

我们说的12GB是主存，512GB是辅存，凭生活经验我们知道**辅存**往往比**主存大得多**。
以下是主存和辅存的定义：

#### 主存
**主存**（Main Memory），也称为**内存**，是计算机系统中的一种高速存储器。它用于存放当前正在运行的程序和数据，**供中央处理器（CPU）直接访问**。主存的特点是存取速度快，但容量相对较小。常见的主存类型包括动态随机存取存储器（DRAM）和静态随机存取存储器（SRAM）.

#### 辅存
**辅存**（Secondary Storage），也称为**外存**或**辅助存储器**，是指计算机系统中的外部存储设备，如硬盘、固态硬盘（SSD）、光盘、U盘等。辅存的特点是存储容量大、成本低、存取速度相对较慢，并且可以在断电后长期保存数据。辅存主要用于存储大量的程序和数据，**供主存调用**.

知道他们的关系后我们可以得到这么一张图：
![层次](/image/3/cengci.png)
```
主存和cpu的工作完全由硬件进行,辅存到主存的工作需要操作系统的调度。
```
有人会问图里的Cache是什么东西？我们先按下不表，先来看一张图来说明他们为什么是这样的层次。
![三星内存条](/image/3/sanxing.png)
这是一条16GB的三星内存条，装在电脑上很明显增多的是它的**主存（或内存）**，图上可以看到它在读，写，复制的速率以及延迟。它的读写速度都大约在**4GB（4096MB）** 左右，它与cpu直接相连由硬件直接进行数据传输。

假设一个CPU的时钟频率为3.5GHz（即每秒3.5亿个时钟周期），而内存的访问时间为70纳秒（即每秒约1400万次访问）。我们可以看到，**CPU处理数据的速度远远快于内存传输的速度**。

我们在生活中会发现一个手机游戏比如**王者荣耀**，这类游戏的“内存”动不动就好几个GB，仅仅一个手机游戏就要占这么多，更别说还有其他数据，更何况电脑的存储空间往往比手机大的多，很显然，**主存放不下！**

计算机中存储的大量数据并不都是需要cpu进行处理的，你不用它的时候，它就静静躺在那里，我们不能让不用的数据放在主存里**占着茅坑不拉屎**，所以需要一个辅助存储空间来放他们，只有在需要他们的时候才会转移到主存中，这就是**辅存**。

而前面我们知道主存和cpu处理数据的速度事实上有很大差距，我们可以采用**cache（高速缓冲存储器）** 来作为二者的中间人，相比之下他有**更小的存储空间与更快的处理速度**，这样可以缓解cpu因为没有数据处理导致的cpu闲置问题。

综上，我们会根据数据传输速率和存储空间得到这么一个金字塔型的图片。
![层次](/image/3/cengci1.png)
当然因为制作复杂程度和材料等的关系价格也呈现这样一个趋势。
![层次](/image/3/思维导图/1.png)

### 按存储介质分类
对于计算机来说数据就是简单的0和1，所以有很多种物理手段可以保存和表示他们，高低电平，正负磁极，光介质，我们根据存储的介质可以分为：
- 半导体存储器（**主存和cache**）
- 光存储器（如光盘）
- 磁表面存储器（如磁带，磁盘）

**主存（内存）和缓存（Cache）使用半导体存储器**的原因主要有以下几点：

#### 1. 高速访问
半导体存储器，如SRAM（静态随机存取存储器）和DRAM（动态随机存取存储器），具有非常快的访问速度。SRAM通常用于缓存，因为它的访问时间在1到10纳秒之间，而DRAM用于主存，访问时间在50到100纳秒之间¹²。这种高速访问能力使得CPU可以更快地读取和写入数据，从而提高系统的整体性能。

#### 2. 随机访问
半导体存储器支持随机访问，这意味着可以在任何时间点直接访问存储器中的任意位置，而不需要按顺序读取。这对于需要频繁访问不同数据位置的计算机系统来说是非常重要的。

#### 3. 集成度高
半导体存储器可以集成到芯片中，体积小且功耗低。SRAM和DRAM都可以在较小的物理空间内提供大量的存储容量，这对于现代计算机系统的紧凑设计非常重要。

#### 4. 稳定性和可靠性
半导体存储器具有较高的稳定性和可靠性。SRAM使用晶体管来存储数据，具有较长的使用寿命和较低的故障率。虽然DRAM需要定期刷新以保持数据，但它的结构简单，制造成本低，适合大规模应用。

#### 数据示例
- **SRAM（用于缓存）**：访问时间约为1到10纳秒，适合存储频繁访问的数据。
- **DRAM（用于主存）**：访问时间约为50到100纳秒，适合存储大量数据。

通过使用半导体存储器，计算机系统能够在性能、功耗和成本之间取得良好的平衡，从而实现高效的数据处理和存储。

```
一个简单的区分方法，半导体存储器就是主存和cache，其他介质的都是辅存
```
之后我们会研究各种存储器的工作原理，之后会讲。
![层次](/image/3/思维导图/2.png)

### 按存取方式分类
![层次](/image/3/cqfs.png)
存储器按存取方式可以分为以下几类：随机存储器（RAM）、只读存储器（ROM）、串行访问存储器和直接存取存储器。以下是它们的定义和工作原理：

#### 1. 随机存储器（RAM, Random Access Memory）
**定义**：RAM是一种可以随机访问任何存储单元的存储器，存取时间与存储单元的物理地址无关。它分为静态RAM（SRAM）和动态RAM（DRAM）。

**工作原理**：
- **SRAM**：使用触发器（flip-flop）来存储每一位数据，具有高速访问的特点，但成本较高，功耗较大，通常用于缓存（Cache）。
- **DRAM**：使用电容存储数据，需要定期刷新以保持数据，成本较低，存储密度高，通常用于主存（内存）。

#### 2. 只读存储器（ROM, Read Only Memory）
**定义**：ROM是一种只能读取而不能写入的存储器，存储内容在制造时或通过特定方法写入后不可更改。

**工作原理**：
- **ROM**：存储内容在制造时写入，适用于存储固件和不需要更改的数据。
- **PROM**：可编程只读存储器，用户可以一次性写入数据。
- **EPROM**：可擦除可编程只读存储器，可以通过紫外线擦除数据并重新编程。
- **EEPROM**：电可擦除可编程只读存储器，可以通过电信号擦除和编程，常用于存储配置数据。

#### 3. 串行访问存储器（Serial Access Memory）
**定义**：串行访问存储器在读/写操作时需要按物理位置的先后顺序进行访问。

**工作原理**：
- **磁带存储器**：数据存储在磁带上，读写时必须从介质的起始位置开始顺序查找，适用于大容量数据的顺序存取。
- **顺序存取存储器**：如磁带，不论信息处于什么位置，读写时都从介质的始端顺序查找。

#### 4. 直接存取存储器（Direct Access Memory）
**定义**：直接存取存储器可以直接访问存储单元，不需要按顺序查找。

**工作原理**：
- **磁盘存储器**：数据存储在磁盘上，可以直接访问特定的磁道和扇区，存取时间取决于数据块的位置和大小，适用于需要频繁随机访问的大容量数据存储。

#### 应用场景
- **RAM**：用于计算机的主存（内存），存储操作系统、应用程序和正在处理的数据。
- **ROM**：用于存储计算机的BIOS、手机的操作系统和预装应用程序。
- **串行访问存储器**：用于磁带存储和一些移动设备中，适合顺序访问的大数据量存储。
- **直接存取存储器**：用于硬盘、光盘等存储设备，适合需要频繁随机访问的场景。

### 其他分类
![层次](/image/3/kggx.png)
![层次](/image/3/kbcx.png)

### 结构梳理
我们知道**计算机 = 硬件 + 软件**，最基本的软件就是**操作系统**，我们需要与操作系统有一定的知识交叉。

前面说过**主存和cache**都是**半导体存储器**，它们需要频繁地随机读写数据，因此主存和cache是**随机存储器**（同时也是读写存储器），电脑断电以后会数据丢失，可知**主存和cache**都是**易失性存储器。**

RAM根据工作原理特性分为***SRAM（静态存储器）***和***DRAM（动态存储器）***，分别用于主存和cache，由于主存需要写回辅存，所以读出后不能被破坏，因此是SRAM。cache作为主存和cpu数据交换的临时中转站，需要保持高速传输很容易丢失，所以是DRAM。

内存（主存）（一般指电脑**内存条**）包含RAM（SRAM,DRAM），ROM,高速缓存（CACHE）,SDRAM,DDRRAM。

而操作系统之类的东西一般不能被更改，要写在ROM中。
![层次](/image/3/思维导图/3.png)
![层次](/image/3/思维导图/fl.png)