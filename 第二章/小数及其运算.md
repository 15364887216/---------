# 定点小数
这里我们速过，不是什么很难的东西。
定点小数与定点整数类似，但是没有移码表示。
![定点小数](/image/2/new1.png)
定点小数通常不使用移码表示，主要原因如下：

1. **移码的设计初衷**：移码（Excess-K）主要用于表示整数，特别是在浮点数的阶码中。它通过将补码的符号位取反来实现，这样可以方便地比较大小。

2. **表示范围和精度**：定点小数的表示范围通常在-1到1之间，而移码的表示范围是基于整数的，这会导致表示范围和精度不匹配。

3. **硬件实现复杂性**：使用移码表示定点小数会增加硬件实现的复杂性，因为需要额外的电路来处理符号位和小数点的位置。

4. **标准化和应用背景**：在计算机体系结构中，移码主要用于浮点数的阶码，而定点小数更多使用原码、反码和补码来表示，这些方法在处理小数时更为直接和高效。

小数部分和整数部分一样都用 **2^n^** 来表示，第一位小数是 **2^-1^**，以此类推。
## 定点小数原反补码的转换
同整数
![定点小数](/image/2/new2.png)
加减法运算在这里也适用
![定点小数](/image/2/new3.png)
当然我们可以再复习一下，做加减法的时候，正数原反补码不变，减法转换为加法：在补码表示中，**减去一个数等同于加上这个数的补码**，这里我们可能让教科书上的这句话哄了！我们可以理解为，**减去一个数等同于加上这个数的负数**，而硬件处理这个操作（即正负补码转化）的步骤与原补码转换的操作类似，即**全部位取反+1**.(别忘了符号位也参与运算！)
![定点小数](/image/2/new4.png)

## 定点小数与定点整数的区别
唯一的区别是**位数拓展时，拓展位数不一样。**这个很好理解，**N**为正整数，**2^N^** 拓展为 **2^N+1^**，向前填充，小数部分 **2^-N^** 拓展为 **2^-N-1^**，向后填充
![定点小数](/image/2/new5.png)

# 算术逻辑单元
前面已经说过基本逻辑单元和数电的一些相关知识了。我们重点看一下ALU（算术逻辑单元）
![ALU](/image/2/ALU.png)
我们看到图中有很多术语：
这些术语都是计算机运算器中的重要组成部分，每个部分都有特定的功能：

1. **MQ（Multiplier-Quotient Register，乘商寄存器）**：在乘法运算中存放乘数，在除法运算中存放商¹。由于乘法和除法的结果可能会超出一个寄存器的范围，MQ用于存储这些结果的高位或低位部分。

2. **ACC（Accumulator，累加器）**：用于存储运算的中间结果和最终结果²。在加法和减法运算中，ACC存储被加数或被减数，并保存运算结果。在乘法和除法运算中，ACC也会参与存储部分结果。

3. **X（操作寄存器）**：用于存储操作数¹。在执行运算时，操作数会被加载到X寄存器中，供ALU使用。

4. **PSW（Program Status Word，程序状态字）**：存储当前运算的状态信息，如运算结果的符号、零标志、进位标志和溢出标志³。这些标志用于控制程序的执行流程和错误处理。

5. **ALU（Arithmetic Logic Unit，算术逻辑单元）**：运算器的核心部分，负责执行所有的算术运算（如加、减、乘、除）和逻辑运算（如与、或、非、异或）²。ALU接收来自寄存器的数据，执行运算，并将结果返回到寄存器中。

这些组件共同工作，使得计算机能够高效地执行各种算术和逻辑运算。

¹: [运算器的基本组成及操作过程 - CSDN博客](https://blog.csdn.net/weixin_44915226/article/details/123232816)
²: [计算机硬件组成原理名词解释 - 知乎](https://zhuanlan.zhihu.com/p/356538531)
³: [定点运算器的基本结构(图解篇) - 电子发烧友网](https://www.elecfans.com/baike/computer/taishiji/20100413215658.html)

目前我们只关注**ALU**，还记得前面我们为了理解加法做了一个全加器吗？当然更专业一点是**并行进位加法器**。全加器已经可以做一些运算了，比如添加一些电路可以做减法，但**ALU**不满足于**算术运算（加减乘除等）**，还有**逻辑运算（与或非等）**，还有**辅助功能（移位等）**，其实在加法器上做一个拓展就好，来看一个简陋的**ALU**（不满足上面说的全部运算，依旧用图灵完备做例子。）
![ALU](/image/2/ALU1.png)
根据电路细节我们来看一下它具体有些什么？
- **操作码**：通过并行总线输入，它向 ALU 传递选择的操作的信息，该操作选择码是对 ALU 要执行的算术或逻辑运算的枚举。
- **数据**：一个基本的 ALU 具有三个并行的数据总线，包括两个输入操作数（输入1、输入2）和结果输出（Output）。

在我图上可以注意到，我们通过一个3位解码器来实现6种运算，加，减，与，或，非，异或。当操作码表示相应的操作时通过解码器打开相应的开关并输出两数进行运算的结果。当然真实情况会更复杂一些。比如我们实验中会接触到的74181（上面的图有），可能需要处理进位，也需要向其他部位发送一些命令信号。
![add](/image/2/add.png)

# 标志位的生成
![add](/image/2/add1.png)
 其中关于加减法的部分可以抽象为上图，看图即可。

